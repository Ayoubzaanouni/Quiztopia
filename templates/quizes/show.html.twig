{% extends 'base.html.twig' %}

{% block title %}Quizes{% endblock %}

{% block body %}
    <h1>Quizes</h1>
{% if (app.user.id == user_id) or (quize.isPublic == 1 ) %}
    

    <table class="table">
        <tbody>
            <tr>
                <th>Created by</th>
                <td>{{ createdBy }}</td>
            </tr>
            <tr>
                <th>Title</th>
                <td>{{ quize.title }}</td>
            </tr>
            <tr>
                <th>Description</th>
                <td>{{ quize.description }}</td>
            </tr>
            <tr>
                <th>Code</th>
                <td>{{ quize.code }}</td>
            </tr>
            <tr>
                <th>Type</th>
                <td>{{ quize.isPublic ? 'Yes' : 'No' }}</td>
            </tr>
            <tr>
                <th>Created_at</th>
                <td>{{ quize.createdAt ? quize.createdAt|date('Y-m-d H:i:s') : '' }}</td>
            </tr>
            <tr>
                <th>Max_tries</th>
                <td>{{ quize.maxTries }}</td>
            </tr>
            <tr>
            <td><img id="qr-code-{{ quize.id }}" src="" alt=""/>
                <script>
                    var image = document.getElementById("qr-code-{{ quize.id }}");
                    var input = "{{ quize.code }}";
                    var api = "https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=" +'/quizes/join/'+ encodeURIComponent(input);
                    image.src = api;
                </script>
            </td>

            <td> 
{% if (app.user.id == user_id) %}
    <a type="button" class="btn but btn-primary" href="{{ path('app_quizes_edit', {'id': quize.id}) }}">edit &nbsp;&nbsp;&nbsp;<i class="fa-solid fa-pen-to-square"></i></a>
 {% else %}
            <a type="button" href="{{ path('app_quizes_join', {'code': quize.code})}}" class="btn but btn-primary">Join <i class="fa-sharp fa-solid fa-right-to-bracket"></i></a>
{% endif %}
            </td>
            </tr>
        </tbody>
    </table>
    {% else %}
        this quiz is private
    {% endif %}
{% if (app.user.id == user_id) %}
    {{ include('quizes/_delete_form.html.twig') }}
{% endif %}
{% endblock %}
